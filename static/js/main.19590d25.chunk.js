(this["webpackJsonpcv-react"]=this["webpackJsonpcv-react"]||[]).push([[0],{132:function(e,t,n){},170:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(12),o=n.n(c),i=(n(132),n(18)),s=n.n(i),u=n(29),l=n(58),p=n(42),d=n(33),h=n(60),b=n(21),j=n(38),f=(n(138),n(75)),O=n(221),g=n(213),m=n(212),x=n(211),v=n(183),k=n(220),y=n(214),w=n(215),C=n(111),N=n.n(C),P=n(84),T=n.n(P),I=n(112),S=n.n(I),M=n(114),R=n.n(M),z=n(85),L=n.n(z),U=n(113),D=n.n(U),A=n(218),B=n(65),_=n(19),E=n(207),F=Object(E.a)((function(e){return{inputRoot:{color:"inherit"},inputInput:Object(_.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})}})),J=n(4);var X=function(e){var t=F(),n=Object(d.b)(),a=Object(r.useRef)(null);return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)("form",{action:"",children:Object(J.jsx)(A.a,{placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){var t=e.target.value;a.current&&clearTimeout(a.current),a.current=setTimeout((function(){var e=Object(B.f)({page:1,title:t});n(e)}),300)}})})})},G=n(35),K=Object(E.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(_.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(_.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(G.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(G.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(_.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(_.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(_.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})),W=(n(170),n(27)),Y=Object(W.c)({name:"theme",initialState:{darkMode:!1},reducers:{toggleTheme:function(e,t){e.darkMode=t.payload}}}),q=Y.actions,Q=Y.reducer,Z=q.toggleTheme,H=Q,V=n(219);var $=function(e){var t=Object(d.b)();return Object(J.jsx)(V.a,{title:"Toggle light/dark theme","aria-label":"add",children:Object(J.jsx)("div",{className:"toggle-switch",children:Object(J.jsxs)("label",{className:"switch",children:[Object(J.jsx)("input",{type:"checkbox",onChange:function(e){var n=Z(e.target.checked);t(n)}}),Object(J.jsx)("span",{className:"slider round"})]})})})};function ee(){var e=K(),t=a.a.useState(null),n=Object(l.a)(t,2),r=n[0],c=n[1],o=a.a.useState(null),i=Object(l.a)(o,2),s=i[0],u=i[1],j=Boolean(r),f=Boolean(s),C=Object(b.g)(),P=Object(d.c)((function(e){return e.user})).currentUser,I=function(e){c(e.currentTarget)},M=function(){u(null)},z=function(){c(null),M()},U="primary-search-account-menu",A=Object(J.jsxs)(v.a,{anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},id:U,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:j,onClose:z,children:[Object(J.jsx)(k.a,{onClick:z,children:"Profile"}),Object(J.jsx)(k.a,{onClick:z,children:"My account"}),Object(J.jsx)(k.a,{onClick:function(){p.a.auth().signOut(),z(),C.push("/sign-in")},children:"Log out"})]}),B="primary-search-account-menu-mobile",_=Object(J.jsxs)(v.a,{anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},id:B,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:f,onClose:M,children:[Object(J.jsxs)(k.a,{children:[Object(J.jsx)(x.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(J.jsx)(m.a,{badgeContent:4,color:"secondary",children:Object(J.jsx)(T.a,{})})}),Object(J.jsx)("p",{children:"Messages"})]}),Object(J.jsxs)(k.a,{children:[Object(J.jsx)(x.a,{"aria-label":"show 11 new notifications",color:"inherit",children:Object(J.jsx)(m.a,{badgeContent:11,color:"secondary",children:Object(J.jsx)(L.a,{})})}),Object(J.jsx)("p",{children:"Notifications"})]}),Object(J.jsxs)(k.a,{onClick:I,children:[Object(J.jsx)(x.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(J.jsx)(N.a,{})}),Object(J.jsx)("p",{children:"Profile"})]})]});return Object(J.jsxs)("div",{className:e.grow,children:[Object(J.jsx)(g.a,{position:"static",children:Object(J.jsxs)(y.a,{children:[Object(J.jsx)(x.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer",children:Object(J.jsx)(S.a,{})}),Object(J.jsx)(w.a,{className:e.title,variant:"h6",noWrap:!0,children:Object(J.jsx)(h.b,{to:"/",style:{textDecoration:"none",color:"#fff"},children:"Material-Ui"})}),Object(J.jsxs)("div",{className:e.search,children:[Object(J.jsx)("div",{className:e.searchIcon,children:Object(J.jsx)(D.a,{})}),Object(J.jsx)(X,{})]}),Object(J.jsx)("div",{className:e.grow}),Object(J.jsxs)("div",{className:e.sectionDesktop,children:[Object(J.jsx)($,{}),!P.name&&Object(J.jsx)(w.a,{className:e.title,variant:"h6",noWrap:!0,style:{display:"flex",alignItems:"center"},children:Object(J.jsx)(h.b,{exact:!0,to:"/sign-in",style:{textDecoration:"none",color:"#fff"},children:"Sign in"})}),P.name&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(x.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(J.jsx)(m.a,{badgeContent:4,color:"secondary",children:Object(J.jsx)(T.a,{})})}),Object(J.jsx)(x.a,{"aria-label":"show 17 new notifications",color:"inherit",children:Object(J.jsx)(m.a,{badgeContent:17,color:"secondary",children:Object(J.jsx)(L.a,{})})}),Object(J.jsx)(x.a,{edge:"end","aria-label":"account of current user","aria-controls":U,"aria-haspopup":"true",onClick:I,color:"inherit",children:Object(J.jsx)(O.a,{alt:P.name,src:P.imageUrl,style:{width:32,height:32}})})]})]}),Object(J.jsx)("div",{className:e.sectionMobile,children:Object(J.jsx)(x.a,{"aria-label":"show more","aria-controls":B,"aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit",children:Object(J.jsx)(R.a,{})})})]})}),_,A]})}var te,ne=n(115),re={body:"#fff",fontColor:"#000",background:"#fff"},ae={body:"#000",fontColor:"#fff",background:"url('https://i.pinimg.com/236x/17/ed/0e/17ed0e7d33e7b6af22738e47f7ef6286.jpg')"},ce=Object(f.b)(te||(te=Object(ne.a)(["\n\tbody {\n\t\tbackground: ",";\n\t}\n    .colorMode {\n\t\tcolor: ",";\n        \n\t}\n"])),(function(e){return e.theme.background}),(function(e){return e.theme.fontColor})),oe=n(90),ie=Object(W.c)({name:"user",initialState:{currentUser:{}},reducers:{initUser:function(e,t){e.currentUser=Object(oe.a)({},t.payload)}}}),se=ie.actions,ue=ie.reducer,le=se.initUser,pe=ue,de=a.a.lazy((function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,285))})),he=a.a.lazy((function(){return n.e(6).then(n.bind(null,280))})),be=a.a.lazy((function(){return Promise.all([n.e(4),n.e(7)]).then(n.bind(null,281))}));p.a.initializeApp({apiKey:"AIzaSyDts2mLmiTXDJkaZjQn0EbhtnoYJpKb-GY",authDomain:"photo-app-2k.firebaseapp.com"});var je=function(){var e=Object(d.c)((function(e){return e.theme})),t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=(n[0],n[1]),c=Object(d.b)();Object(r.useEffect)((function(){var e=p.a.auth().onAuthStateChanged(function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return console.log("ch\u01b0a login "),n=le({}),c(n),e.abrupt("return");case 5:return console.log("login user ",t.displayName),e.next=8,t.getIdToken();case 8:r=e.sent,o={name:t.displayName,imageUrl:t.photoURL,phoneNumber:t.phoneNumber,providerId:t.providerId,uid:t.uid,email:t.email,token:r},i=le(o),c(i),a(!!t);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]);var o=e.darkMode;return Object(J.jsxs)(f.a,{theme:o?ae:re,children:[Object(J.jsx)(ce,{}),Object(J.jsxs)("div",{className:"App",children:[Object(J.jsx)(r.Suspense,{fallback:Object(J.jsx)("div",{children:"Loading ..."}),children:Object(J.jsxs)(h.a,{children:[Object(J.jsx)(ee,{}),Object(J.jsxs)(b.d,{children:[Object(J.jsx)(b.a,{exact:!0,from:"/",to:"/photos"}),Object(J.jsx)(b.b,{path:"/photos",component:de}),Object(J.jsx)(b.b,{path:"/sign-in",component:be}),Object(J.jsx)(b.b,{component:he})]})]})}),Object(J.jsx)(j.a,{})]})]})},fe=function(e){e&&e instanceof Function&&n.e(8).then(n.bind(null,282)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},Oe=n(216),ge=Object(W.a)({reducer:{photo:B.e,theme:H,user:pe}});o.a.render(Object(J.jsxs)(d.a,{store:ge,children:[Object(J.jsx)(Oe.a,{}),Object(J.jsx)(a.a.StrictMode,{children:Object(J.jsx)(je,{})})]}),document.getElementById("root")),fe()},44:function(e,t,n){"use strict";var r=n(18),a=n.n(r),c=n(29),o=n(104),i=n.n(o),s=n(105),u=n.n(s),l=n(42),p=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=l.a.auth().currentUser)){e.next=3;break}return e.abrupt("return",t.getIdToken());case 3:return n=l.a.auth().onAuthStateChanged(function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.getIdToken();case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=i.a.create({baseURL:"http://js-post-api.herokuapp.com/api/posts",headers:{"content-type":"application/json"},paramsSerializer:function(e){return u.a.stringify(e)}});d.interceptors.request.use(function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return(n=e.sent)&&(t.headers.Authorization="Bearer ".concat(n)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d.interceptors.response.use((function(e){return e&&e.data?e.data:e}),(function(e){throw e}));var h=d,b={getAll:function(e){var t="?_limit=10&_page=".concat(e);return h.get(t)},get:function(e){var t="/".concat(e);return h.get(t)},search:function(e,t){var n="?_limit=10&_page=".concat(e,"&title_like=").concat(t);return h.get(n)},post:function(e){return h.post("/",e)},edit:function(e){var t="/".concat(e.id);return h.put(t,e)},remove:function(e){var t="/".concat(e);return h.delete(t)}};t.a=b},65:function(e,t,n){"use strict";n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return O}));var r,a=n(19),c=n(80),o=n(18),i=n.n(o),s=n(29),u=n(27),l=n(38),p=n(44),d=Object(u.b)("photo/search",function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.search(t.page,t.title);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h=Object(u.b)("photo/scroll",function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.search(t.page,t.title);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=Object(u.b)("photo/add",function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(u.b)("photo/get",function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=Object(u.b)("photo/edit",function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.edit(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(u.b)("photo/remove",function(){var e=Object(s.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.remove(t);case 2:return e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(u.c)({name:"photo",initialState:{data:[],pagination:{},key:"",currentpage:1,totalPage:1,loading:!1},reducers:{fetchdata:function(e,t){},addPhoto:function(e,t){l.b.success("Th\xeam photo th\xe0nh c\xf4ng")},editPhoto:function(e,t){},removePhoto:function(e,t){},searchPhoto:function(e,t){}},extraReducers:(r={},Object(a.a)(r,d.fulfilled,(function(e,t){var n,r,a=t.payload,o=a.data,i=a.pagination,s=i._totalRows,u=i._limit;e.data=[],(n=e.data).push.apply(n,Object(c.a)(o)),e.pagination=i,e.key=null===(r=t.meta.arg)||void 0===r?void 0:r.title,e.currentpage=1,e.totalPage=Math.ceil(s/u)})),Object(a.a)(r,h.fulfilled,(function(e,t){var n,r=t.payload.data;(e.currentpage=e.currentpage+1,e.currentpage<=e.totalPage)&&(n=e.data).push.apply(n,Object(c.a)(r))})),Object(a.a)(r,b.pending,(function(e,t){e.loading=!0})),Object(a.a)(r,b.fulfilled,(function(e,t){e.loading=!1,l.b.success("Th\xeam photo th\xe0nh c\xf4ng")})),Object(a.a)(r,b.rejected,(function(e,t){e.loading=!1,l.b.error("Th\xeam photo th\u1ea5t b\u1ea1i")})),Object(a.a)(r,j.fulfilled,(function(e,t){})),Object(a.a)(r,f.pending,(function(e,t){e.loading=!0})),Object(a.a)(r,f.fulfilled,(function(e,t){e.loading=!1,l.b.success("S\u1eeda photo th\xe0nh c\xf4ng")})),Object(a.a)(r,f.rejected,(function(e,t){e.loading=!1,l.b.error("Th\xeam photo th\u1ea5t b\u1ea1i")})),Object(a.a)(r,O.pending,(function(e,t){})),Object(a.a)(r,O.fulfilled,(function(e,t){var n=t.payload,r=e.data.findIndex((function(e){return e.id==n}));r>-1&&e.data.splice(r,1),l.b.success("X\xf3a photo th\xe0nh c\xf4ng")})),Object(a.a)(r,O.rejected,(function(e,t){l.b.error("X\xf3a th\u1ea5t b\u1ea1i")})),r)}),m=g.actions,x=g.reducer;m.addPhoto,m.editPhoto,m.removePhoto,m.fetchdata,m.searchPhoto;t.e=x}},[[173,1,2]]]);
//# sourceMappingURL=main.19590d25.chunk.js.map